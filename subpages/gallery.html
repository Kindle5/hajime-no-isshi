<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gallery 「はじめの一矢」ポータルサイト</title>
  <link rel="icon" href="../img/common/favicon.png">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/style_Gallery.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

  <meta name="twitter:card" content="summary_large_image"/>
  <meta property="og:type" content="website">
  <meta property="og:title" content="艦これ「はじめの一矢」Gallery">
  <meta name="twitter:description" content="記憶を失った艦娘の物語">
  <meta property="og:description" content="記憶を失った艦娘の物語">
  <meta property="og:image" content="https://kindle5.github.io/hajime-no-isshi/img/top/thumbnails/thumbnail1.jpg">
  <meta property="og:url" content="scriptでURL挿入" class="og url">
  <script>
    const metaOgUrl = document.querySelector('.og.url');
    metaOgUrl.setAttribute('content', `${location.href}`);
  </script>
</head>

<body>
    
  <div id="display-space">
    <div class="dpcontainer">
      <div class="closebtn">
        <i class="bi bi-x-square-fill"></i>
      </div>
      <div class="imgbox"></div>
    </div>
  </div>

  <header>
    <a href="../index.html" alt="サイトトップへ">
      <img src="../img/common/title_logo_small_2.png" class="logo">
    </a>
    <div class="m-menu">
      <h2>Menu</h2>
      <img src="../img/common/menu_icon_mobile_2.png" id="open" alt="メニューを開く">
    </div>
  </header>

  <div class="overlay">
    <img src="../img/common/menu_icon_mobile.png" id="close" alt="メニューを閉じる">
    <nav>
      <ul class="menu">
        <li id="m1" class="index">
          <a href="../index.html">Top</a>
        </li>
        <li id="m2" class="m-exp Notice">
          <a href="../subpages/notice.html">Notice</a>
        </li>
        <li id="m3" class="m-exp Story">
          <a href="../subpages/story.html">Story</a>
        </li>
        <li id="m4" class="m-exp Character">
          <a href="../subpages/characters.html">Characters</a>
        </li>
        <li id="m5" class="m-exp Gallery">
          <a href="../subpages/gallery.html">Gallery</a>
        </li>
        <li id="m6" class="m-exp Diagnosis">
          <a href="../subpages/diagnosis/diagnosis.html" class="allowed_wrap">Diagnosis</a>
        </li>
        <li id="m7" class="m-exp Special_Thanks">
          <a href="../subpages/specialthanks.html">Special Thanks</a>
        </li>
        <!-- <li id="m8" class="m-exp Links">
          <a href="../subpages/links.html">Links</a>
        </li> -->
      </ul>
      <div class="menu-btn l-close">
        <p>
          <i class="bi bi-arrow-bar-left"></i>
          CLOSE
        </p>
      </div>
      <div class="menu-btn l-open disappear">
        <p>
          <i class="bi bi-arrow-bar-right"></i>
        </p>
      </div>
    </nav>
  </div>

  <div class="header-space"></div>

  <div class="page-bg">
    <img src="../img/common/Zuikaku_bg.png">
  </div>

  <main class="sb-main gallery">
    <div id="target"></div> 
    <div class="box-scroll">
      <a href="#" id="to-top">
        <i class="bi bi-arrow-up-square-fill"></i>
      </a>
    </div>
    <div class="page_title gallery">
      <h1>Gallery</h1>
    </div>
    <div class="container1 gallery">
      <img src="../img/gallery/02.jpg">
      <img src="../img/gallery/03.jpg">
      <img src="../img/gallery/04.jpg">
      <img src="../img/gallery/05.jpg">
      <img src="../img/gallery/06.jpg">
      <img src="../img/gallery/07.jpg">
      <img src="../img/gallery/08.jpg">
      <img src="../img/gallery/09.jpg">
      <img src="../img/gallery/10.jpg">
      <img src="../img/gallery/11.jpg">
      <img src="../img/gallery/12.jpg">
      <img src="../img/gallery/13.jpg">
      <img src="../img/gallery/14.jpg">
      <img src="../img/gallery/15.jpg">
      <img src="../img/gallery/20.jpg">
      <img src="../img/gallery/21.jpg">
      <img src="../img/gallery/16.jpg">
      <img src="../img/gallery/17.jpg">
      <img src="../img/gallery/18.jpg">
      <img src="../img/gallery/19.jpg">
    </div>
  </main>

  <section class="footer-img">
    <img src="../img/common/Akagi_color.png" id="o-akagi">
    <img src="../img/common/Zuikaku_color.png" id="o-zuikaku">
    <img src="../img/common/footer_image.png" id="family">
  </section>

  <footer></footer>

  <script src="../js/footer.js"></script>
  <script src="../js/main.js"></script>
  <script>
    'use strict';
    const thumbs = document.querySelectorAll('main .container1 img');
    const dSpace = document.getElementById('display-space');
    const imgBox = document.querySelector('#display-space .imgbox')
    const closeBtn = document.querySelector('#display-space .closebtn i');
    let imgIndex;

    for (let i = 0; i < thumbs.length; i++) {
      // サムネを複製して拡大表示用エリアの子要素に
      const cloneImg = thumbs[i].cloneNode();
      imgBox.appendChild(cloneImg);

      thumbs[i].addEventListener('click', () => {
        dSpace.classList.add('show');
        openImg(i);
      });
    }

    const dsImgs = document.querySelectorAll('#display-space img');

    function openImg(indexNumber) {
      dsImgs[indexNumber].classList.add('show');
      imgIndex = indexNumber;
    }
    
    function closeImg() {
      dSpace.classList.remove('show');
      dsImgs[imgIndex].classList.remove('show');
    }

    closeBtn.addEventListener('click', closeImg)

    // 余白クリックでも画像を閉じる
    function marginClick(e) {
      if (e.target.closest('#display-space img') === null) closeImg();
    }
    dSpace.addEventListener('click', marginClick);
  </script>
</body>
</html>